import{a as N,b as f,c as w,d as k,e as T,f as p,g as D,h as F,i as I,j as V,k as G}from"./chunk-63LDT3U2.js";import{a as z}from"./chunk-2724IQTX.js";import{a as A}from"./chunk-UOOXSHS5.js";import"./chunk-HTA2NUC3.js";import{A as S,E as d,G as s,I as m,L as n,M as i,N as l,O as M,P as O,Q as c,S as r,U as u,X as y,a as _,b as h,ka as E,l as x,ma as q,n as v,o as b,v as P,x as a}from"./chunk-OZFER6DC.js";var R=()=>["/"];function $(t,o){t&1&&(n(0,"h3",0),r(1," No tienes productos en el carrito por el momento. Ve a la tienda para comprar. "),n(2,"div",2)(3,"button",3),r(4,"Tienda"),i()()()),t&2&&(a(3),s("routerLink",y(1,R)))}function j(t,o){if(t&1&&(n(0,"div",6),r(1),i()),t&2){let e=c(2);a(),u(" ",e.errores().nombre," ")}}function B(t,o){if(t&1&&(n(0,"div",6),r(1),i()),t&2){let e=c(2);a(),u(" ",e.errores().telefono," ")}}function H(t,o){if(t&1&&(n(0,"div",6),r(1),i()),t&2){let e=c(2);a(),u(" ",e.errores().direccion," ")}}function J(t,o){if(t&1){let e=M();n(0,"form",4),O("ngSubmit",function(){v(e);let L=c();return b(L.handleSubmit())}),n(1,"h1"),r(2,"Realizar Pedido"),i(),n(3,"label"),r(4,"Nombre"),i(),l(5,"input",5),d(6,j,2,1,"div",6),n(7,"label"),r(8,"Tel\xE9fono"),i(),l(9,"input",7),d(10,B,2,1,"div",6),n(11,"label"),r(12,"Direcci\xF3n"),i(),l(13,"textarea",8),d(14,H,2,1,"div",6),n(15,"label"),r(16,"Informaci\xF3n relevante"),i(),l(17,"textarea",9),n(18,"button"),r(19,"Enviar"),i()()}if(t&2){let e=c();s("formGroup",e.form),a(6),m(e.errores().nombre?6:-1),a(4),m(e.errores().telefono?10:-1),a(4),m(e.errores().direccion?14:-1),a(3),s("placeholder",e.placeholder)}}var C=class t{apiService=x(z);carService=x(q);errores=P({});ngOnInit(){this.getCar()}placeholder=`Estoy en la casa a partir de las 4 
Necesito que sea antes de ma\xF1ana`;form=new T({nombre:new p("",f.required),telefono:new p(0,f.required),direccion:new p("",f.required),otros:new p("")});carrito=[];getCar(){this.carrito=this.carService.getCar()}formData=this.form.value;calcTotal(){return this.carrito.reduce((o,e)=>o+e.price*e.amount,0)}productos="";data={};handleSubmit(){this.carrito.map(o=>{this.productos+=`${o.amount} x ${o.name} 
`}),this.data=h(_({},this.form.value),{productos:this.productos,total:this.calcTotal()}),this.apiService.postProduct(this.data).subscribe({next:()=>{alert("Se envi\xF3 con \xE9xito"),this.errores.set({}),this.form.reset(),this.carService.cleanCar()},error:o=>{this.errores.set(o.error),console.log(o.error)}})}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=S({type:t,selectors:[["app-pedido"]],decls:5,vars:1,consts:[[1,"noHay"],[3,"formGroup"],[1,"tienda"],[3,"routerLink"],[3,"ngSubmit","formGroup"],["type","text","formControlName","nombre",1,"all"],[1,"error"],["type","number","formControlName","telefono",1,"all"],["formControlName","direccion",1,"all"],["formControlName","otros",1,"all",3,"placeholder"]],template:function(e,g){e&1&&(n(0,"main")(1,"section"),l(2,"app-backbtn"),d(3,$,5,2,"h3",0)(4,J,20,5,"form",1),i()()),e&2&&(a(3),m(g.carrito.length?4:3))},dependencies:[G,D,N,F,w,k,I,V,A,E],styles:["[_nghost-%COMP%]{display:block}form[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:90%;margin:20px auto}h1[_ngcontent-%COMP%]{font-size:22px}.all[_ngcontent-%COMP%]{border:none;border-radius:10px;padding:0 5px;background-color:var(--input);color:var(--color);font-size:16px}.all[_ngcontent-%COMP%]:focus{outline:none}input[_ngcontent-%COMP%]{height:30px}textarea[_ngcontent-%COMP%]{height:80px}button[_ngcontent-%COMP%]{height:30px;background-color:var(--primary);border:none;border-radius:10px;color:#fff;font-size:16px;transition:.3s;margin-top:20px}button[_ngcontent-%COMP%]:hover{background-color:var(--opaco);color:var(--primary)}label[_ngcontent-%COMP%]{margin-top:10px}.error[_ngcontent-%COMP%]{color:red}h3[_ngcontent-%COMP%]{text-align:center;font-weight:400;color:var(--color)}.tienda[_ngcontent-%COMP%]{margin-top:40px}.tienda[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:var(--primary);color:#fff;font-size:20px;border-radius:10px;width:200px;padding:0 0 5px;transition:ease .3s}.tienda[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#0064fa}"],changeDetection:0})};export{C as default};
